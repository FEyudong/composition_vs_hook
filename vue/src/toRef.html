<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>reactive</title>
  </head>
  <body>
    <div id="app"></div>
    <script src="https://unpkg.com/vue@next"></script>
    <script>
      const {reactive,toRef,toRefs,onMounted,onUnmounted} = Vue
      function useMousePositon(){
        const pos = reactive({
          x:0,
          y:0
        })
        const posRefsObj = useRefs(pos)
        const onChange = (e)=>{
          pos.x = e.pageX
          pos.y = e.pageY
        }
        onMounted(()=>{
          window.addEventListener('mousemove',onChange)
        })
        onUnmounted(()=>{
          window.removeEventListener('mousemove',onChange)
        })
        //下边的解构会让proxy失效，响应式丢失 
         return pos
        // 方法1 toRef
        // return {
        //   x:toRef(pos,'x'),
        //   y:toRed(pos,'y')
        // }
        // 方法2 toRefs
        // return {
        //   ...toRefs(pos)
        // }
        // 方法3 一开始就用ref声明单个 
        //let x = ref(0)
        //let y = ref(0)
        // return {
        //   x,
        //   y
        // }
      }
      const Counter = {
        setup(){
          const state = reactive({
            title:'ref'
          })
          const {x,y} = useMousePositon()
          return {
            state,
            x,
            y
          }
        },
        template:`{{state.title}}<h1>x: {{x}}</h1><h1>y: {{y}}</h1>`,
      };
      const app = Vue.createApp(Counter).mount("#app");
    </script>
  </body>
</html>
